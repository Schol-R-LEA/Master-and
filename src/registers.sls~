#!r6rs

(library (leg assembly-record)
  (export
   reg register-32 register-32-set
   register-64 register-64-set
   )
  
  (import (rnrs base (6))
          ;; composite standard library, imports most std libs
          (rnrs (6)))

  (define (reg n)
    (if (and (integer? n) (< 31 n))
        n
        #f))

  (define-enumeration register-32
    (r0 r1 r2 r3 r4 r5 r6 r7 r8 r9 r10 r11 r12 sp lr pc)
    register-32-set)

  (define-enumeration register-64
    (r0 r1 r2 r3 r4 r5 r6 r7 r8 r9 r10 r11 r12 r13 r14 r15
        r16 r17 r18 r19 r20 r21 r22 r23 r24 r25 r26 r27 r28   
        x0  x1  x2  x3  x4  x5  x6  x7  x8  x9  x10 x11 x12 x13 x14 x15
        x16 x17 x18 x19 x20 x21 x22 x23 x24 x25 x26 x27 x28   
        w0  w1  w2  w3  w4  w5  w6  w7  w8  w9  w10 w11 w12 w13 w14 w15
        w16 w17 w18 w19 w20 w21 w22 w23 w24 w25 w26 w27 w28 
        xlr xpc rsp rzr xzr wzr)
    register-64-set))
